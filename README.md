Инструкция по AdminHelper.ahk
=========================

### Скачать AdminHelper.ahk:
<https://github.com/danilvalov/adminhelper-for-samp-rp/releases/latest>


Сразу скажу, что это - просто биндер с несколько расширенным функционалом. Весь исходный код вы можете посмотреть/изменить, открыв файлы `*.ahk` из архива со скриптом в обычном Блокноте. Вы имеете полное право переписывать/изменять весь исходный код скрипта под себя (для этого он и был создан).

Все пожелания и предложения по расширению/изменению фунционала скрипта просьба кидать в [Issues](https://github.com/danilvalov/adminhelper-for-samp-rp/issues). Буду стараться в кратчайшие сроки обновлять код, расширяя его возможности.

**Внимание:** инструкция по запуску скрипта находится внизу первым пунктов в разделе [FAQ](https://github.com/danilvalov/adminhelper-for-samp-rp#faq).



### Модули:

  * **SAMP-UDF-Ex** - работа напрямую с клиентом SAMP (список пользователей, модалки и информационные сообщения).


  * **SAMP-UDF-Addon** - расширение SAMP-UDF-Ex, позволяющее телепортироваться, включать/выключать WallHack и т.д.


  * **SAMP-UsersListUpdater** - дополнение для SAMP-UDF-Ex, обеспечивающие более безотказное обновление списка пользователей в биндере.


  * **SAMP-SendChatSavingMessage** - дополнение для SAMP-UDF-Ex, добавляющее возможно отправлять сообщения штатным образом (через F6), обезопасив себя от случайно забытых не стёртых из окна ввода сообщения команд/слов/знаков. Перед отправкой стирает всё, что было написано в строке ввода сообщения. Также при указании в данной функции вторым параметром "False", вводит текст/команду в строку ввода сообщения без отправки (не нажимая Enter).


  * **CMD** - добавление плагинам поддержки использования собственных команд в поле ввода ("/atp", "/addcheckid" и т.п.).


  * **Chatlog** - работа с chatlog.txt (добавляет возможность получения плагинами данных об IP последнего забанненого пользователя, id последнего игрока, приславшего вам смс и т.п.).


  * **NearbyPlayers** - получение списка игроков, находящихся в определённом радиусе от вас, определённого лвла (требуется для команд `/ntp`, `/sethps` и т.п.).


  * **IgnoreList** - модуль исключает в плагинах игроков, которые не должны добавляться в список телепортации, у которых не должно изыматься оружие через `/giveguns`, `/hbjs` и т.д., т.е. "список неприкасамых" - в него по-умолчанию входят все Администраторы SAMP-RP (список игроков в игнор-листе можно посмотреть/изменить в Настройках скрипта (двойной клик по иконке AHK в трее)).

    Добавляет также поддержку следующих команд:

    - `/ignore [Nick_Name]` - временно добавить игрока в ИгнорЛист.

    - `/unignore [Nick_Name]` - временно удалить игрока из ИгнорЛиста.

    Бывают ситуации, когда на МП нужно пропускать при выдаче оружия/объектов/хп какого-то игрока (например, если он - организатор). Или наоборот, нужно временно убрать Администратора из ИгнорЛиста. Эти команды добавляют/удаляют из ИгнорЛиста игроков до перезапуска AdminHelper'а. Если вы хотите добавить какого-то игрока в ИгнорЛист на постоянной основе - воспользуйтесь окном Настроек AdminHelper'а и вкладкой "ИгнорЛист".


  * **JSON** - добавление поддержки обработки JSON-файлов в скрипте (требуется для получения информации о местоположении игрока по его IP).



### Плагины:

  * **LastSMS** - плагин для ответа на последнее полученное SMS.
    Вводит в чат: `/t [id_последнего_отправителя_sms] `.
    По-умолчанию, работает на сочетании "Alt+T" (латинская) - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).


  * **LastPM** - плагин для ответа на последний полученный репорт, вопрос саппорту (при включеном `/sduty`) или запрос смены ника.
    Вводит в чат: `/pm [id_последнего_игрока_отправившего_репорт] `.
    По-умолчанию, работает на сочетании "Alt+P" (латинская) - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).


  * **PMToLastMuteOrDM** - плагин для ответа последнему игроку, которого именно вы посадили в ДеМорган или дали/сняли БЧ.
    Вводит в чат: `/pm [id_игрока_которому_вы_дали_последний_БЧ_или_посадили_в_ДеМорган] `.
    По-умолчанию, работает на сочетании "Alt+U" (латинская) - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).


  * **AutoHP** - плагин для автоматического пополнения HP.

    Добавляет поддержку следующих команд:

    - `/ahp` (или `/autohp`) - включить/выключить автоматическое пополнение HP (в Настройках скрипта (двойной клик по иконке AHK в трее) можно включить/отключить автоматическое включение AutoHP при запуске AdminHelper.ahk).

    - `/ahptime [количество секунд]` - указать время обновления таймера в секундах (по-умолчанию, 10 секунд). Если таймер был выключен - он снова запустится с новым интервалом между проверками HP после ввода данной команды.

    - `/ahpmin [количество HP]` - указать максимальное количество HP, при котором HP будет пополняться (по-умолчанию, 95 hp). Если таймер был выключен - он не запустится снова после ввода данной команды.

    Внимание: команды `/ahptime` и `/ahpmin` не сохраняют указанные в них значения в настройках, в результате чего после перезапуска AHK введённые настройки будут сброшены. Чтобы настройки остались в AHK - укажите их через Настройки скрипта (двойной клик по иконке AHK в трее).



  * **ReconViewer** - плагин для переключения по кругу (вперёд-назад) по пользователям.

    Поддерживает следующие функции:

    - Переключиться к следующему игроку.
      По-умолчанию, работает на сочетании "Alt+Ю" - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).

    - Переключиться к предыдущему игроку.
      По-умолчанию, работает на сочетании "Alt+Б" - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).

    - Запустить цикличную автоматическую смену игроков.
      По-умолчанию, работает на сочетании "Alt+L" (латинская) - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).

    - Остановить цикличную автоматическую смену игроков.
      По-умолчанию, работает на сочетании "Alt+K" (латинская) - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).

    - `/rerun` - запустить цикличную автоматическую смену игроков по таймеру (то же, что и сочетание "Alt+L", только командой).

    - `/restop` - остановить цикличную автоматическую смену игроков по таймеру (то же, что и сочетание "Alt+K", только командой).

    - `/retime [sec]` - команда меняет количество секунд между цикличной автоматической сменой игроков в реконе. Данную команду можно вводить и при запущенном таймере цикличной автоматической смены игроков - изменения применятся сразу.
      По-умолчанию, 5 секунд (меняется в Настройках скрипта (двойной клик по иконке AHK в трее)).

    - `/relvl [lvl]` - команда меняет максимальный lvl игроков, по которому вы будете перемещаться плагином. Данную команду можно вводить и при запущенном таймере цикличной автоматической смены игроков - изменения применятся сразу.
      По-умолчанию, 3 lvl (меняется в Настройках скрипта (двойной клик по иконке AHK в трее)).

    Внимание: команды `/retime` и `/relvl` не сохраняют указанные в них значения в настройках, в результате чего после перезапуска AHK введённые настройки будут сброшены. Чтобы настройки остались в AHK - укажите их через Настройки скрипта (двойной клик по иконке AHK в трее).



  * **ReconLastPM** - плагин для подключения в реконе к ID, указанному в тексте последнего репорта (используются только репорты с цифрами в тексте).
    По-умолчанию, работает на клавише "Numpad2" - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).


  * **ReconLastWarning** - плагин для подключения в реконе к ID в последнем Warning'е.
    По-умолчанию, работает на клавише "Numpad3" - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).


  * **TP** - плагин для телепортации игроков.

    Добавляет поддержку следующих команд:

    - `/atp [id] [id]` - добавить в список телепортации игроков с указанными id'ами.

    - `/rtp [id] [id]` - удалить из списка телепортации игроков с указанными id'ами.

    - `/ltp [количество]` - начинает телепортировать к себе игроков, присылающих смс (если количество не указано - будут добавляться все игроки, приславшие смс, до ввода любой другой из нижеперечисленных команд плагина (кроме /atp, /rtp и /htp), повторный ввод команды /ltp также остановит сбор игроков по смс в список телепортации). Важно: перед началом добавления игроков в список телепортации данная команда очищает весь предыдущий список для ТП.

    - `/ntp [радиус] [lvl] [0 - равно или меньше, 1 - равно или больше указанного lvl'а]` - добавить в список телепортации всех игроков, расположенных в указанном радиусе и имеющих подходящих LVL (если не указать ни одного параметра - будут добавлены все игроки в радиусе 30 метров, если указать только радиус - будут добавлены все игроки в указанном радиусе). Можно указывать не все параметры (например, "/ntp 60" - добавить в список для ТП всех игроков в радиусе 60 метров). Важно: перед началом добавления игроков в список телепортации данная команда очищает весь предыдущий список для ТП.

    - `/gtp` - посмотреть весь собранный список игроков для телепортации.

    - `/ctp` - очистить весь список игроков для телепортации.

    - `/stp` - начать/остановить телепортацию игроков из списка телепортации.

    - `/htp` (`/helptp`, `/tphelp`) - посмотреть список команд для телепортации в игре.

    - `/gotp [x-координата] [y-координата] [z-координата] [id интерьера]` - телепортироваться по указанным координатам. Если `id интерьера` не введено - будет телепортировать в нулевом (основном) мире. Пример: `/gotp 2179.5371 1623.3649 999.9748` - телепортироваться в подвал Калигулы.


  * **TakeNearby** - плагин для изъятия оружия и нарко у игроков, стоящих в радиусе 8 метров.

    Добавляет поддержку следующий команд:

    - `/takeguns` - забрать оружие у игроков, стоящих в радиусе 8 метров.

    - `/takenarko` - забрать наркотики у игроков, стоящих в радиусе 8 метров.


  * **BanIP** - плагин для бана по IP.

    Добавляет поддержку следующих функций/команд:

    - Забанить по IP последнего забаненного игрока + автоматическая проверка на наличие игроков с таким же IP онлайн (с 4-го лвла).
    По-умолчанию, работает на сочетании "Alt+Numpad9" - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).

    - `/banipn [Nick_Name]` - забанить по IP игрока с указанным ником.

    - `/unbanipn [Nick_Name]` - разбанить IP игрока с указанным ником.

    - `/offban [Nick_Name] [Причина] 1` - игрок будет забанен в оффе на месяц сразу с баном по IP.

    - `/ioffban [Nick_Name] [Причина] 1` - игрок будет забанен в оффе до 2038 года сразу с баном по IP.

    - `/ban [ID] [Причина] 1` - игрок будет забанен на месяц сразу с баном по IP.

    - `/sban [ID] [Причина] 1` - игрок будет тихо забанен на месяц сразу с баном по IP.

    - `/iban [ID] [Причина] 1` - игрок будет забанен до 2038 года сразу с баном по IP.


  * **GetIP** - плагин для работы с IP-адресами игроков.

    Добавляет поддержку следующих функций/команд:

    - Вывести информацию о местоположении последнего забаненного игрока или игрока, данные об IP которого были запрошены последними (через команды `/getip`, `/agetip`).
      По-умолчанию, работает на сочетании клавиш Shift+Alt+I (латинская) - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).

    - `/tgetip [id]` - выводит список всех игроков онлайн с таким же IP, что и у игрока с указанным id.

    - `/geoip [id/nick/ip]` - выводит информацию о местоположении игрока с указанным id, ником или IP.
      Примеры:
        `/geoip 15` - получить информацию о местоположении игрока с ID 15.
        `/geoip Nick_Botov` - получить информацию о местоположении игрока с ником Nick_Botov (даже если он оффлайн).
        `/geoip 212.188.214.114` - получить информацию о местоположении IP 212.188.214.114.
      Важно: чтобы передать информацию о местоположении данного игрока в Админ чат, нужно в конце данной команды добавить "1". Пример: `/geoip [id/nick/ip] 1`.

    - Проверка местоположения последнего игрока, запросившего смену ника через `/mm` - Сменить ник.
      В результате выполнения данной функции в чате отобразится местоположение игрока (регистрация/текущий IP) + если местоположение IP регистрации и текущего IP совпадут (если дистанция между местоположениями - 0 км), в строку ввода сообщения автоматически будет введено: `/setnik [id_игрока_приславшего_запрос_на_смену_ника]`, ожидающее нажатия Enter для ввода (`/setnik` автоматически отправлен НЕ БУДЕТ - он будет ждать вашего подтверждения, давая вам возможность проверить ник на корректность).
      По-умолчанию, работает на сочетании клавиш Shift+Alt+Numpad "/" - можно поменять в Настройках скрипта (двойной клик по иконке AHK в трее).

    - `/allstats [id/nick]` - выводит всю информацию об игроке (текущий IP, местоположение, список игроков онлайн в таким же IP, оффлайн статистику).

    - `/astats [id]` - выводит оффлайн статистику игрока по его ID.

  * **SetHPs** - плагин для раздачи `/sethp` всем игрокам, находящимся рядом.

    Добавляет поддержку следующих команд:

    - `/sethps [количество hp] [радиус] [lvl] [0 - равно или меньше, 1 - равно или больше указанного lvl'а]` - выдаёт HP в указанном количестве всем игрокам в указанном радиусе и с указанным LVLом (если не указать ни одного параметра - будет выставлено по 100 HP всем игрокам, находящимся в радиусе 30 метров, если указать только HP радиус - указанное количество HP будет выдано всем игрокам в указанном радиусе). Можно указывать не все параметры (например, "/sethps 100 40" - сделать всем игрокам в радиусе 40 метров по 100 HP). Повторный ввод данной команды будет прерывать цикл выдачи HP.


  * **GiveGuns** - плагин для выдачи оружия всем игрокам, находящимся рядом.

    Добавляет поддержку следующих команд:

    - `/giveguns [id оружия (можно через запятую указывать несколько)] [радиус] [lvl] [0 - равно или меньше, 1 - равно или больше указанного lvl'а]` - выдаёт указанное оружие с 999 патронами всем игрокам в указанном радиусе и с указанным LVLом (если не указать ни одного параметра - будет выставлено по 100 HP всем игрокам, находящимся в радиусе 30 метров, если указать только радиус - будут добавлены все игроки в указанном радиусе). Можно указывать не все параметры (например, "/giveguns 31 40" - сделать всем игрокам в радиусе 40 метров по MP4). Повторный ввод данной команды будет прерывать цикл выдачи оружия.

    - `/giveiguns [id_игроков,через_запятую] [id_оружия,через_запятую]` - выдаёт указанное оружие с 999 патронами игрокам с указанными IDами. Если не указать 2-й параметр - будет выдана M4 (например, "/giveguns 24,15" - выдать M4 игрокам с ID 24 и 15). Повторный ввод данной команды будет прерывать цикл выдачи объектов.


  * **Uninvites** - плагин для увольнения всех онлайн или оффлайн игроков из фракции (лидер игнорируется).

    Добавляет поддержку следующих команд:

    - `/uninvites [id фракции] [ник игрока, которого не нужно увольнять] [ник игрока, которого не нужно увольнять]...` - уволить всех онлайн-игроков из фракции, кроме ников, указанных после ида фракции в команде. Пример: `/uninvites 12 Flazy_Fad El_Capone Danil_Valov` - будут уволены все онлайн-игроки из Rifa, кроме Flazy_Fad, El_Capone и Danil_Valov. Повторный ввод данной команды будет прерывать цикл увольнения.

    - `/offuninvites [id фракции] [ник игрока, которого не нужно увольнять] [ник игрока, которого не нужно увольнять]...` - уволить всех оффлайн-игроков из фракции, кроме ников, указанных после ида фракции в команде. Пример: `/offuninvites 18 Danil_Valov` - будут уволены все игроки из LVPD, кроме Danil_Valov. Повторный ввод данной команды будет прерывать цикл увольнения.

    - `/listuninvites [id фракции]` - уволить игроков из фракции по списку (файл `UninvitesList.ini` в папке `AdminHelper` или Настройки `AdminHelper.ahk` - вкладка `Uninvites`). Пример: `/listuninvites 18` - будут уволены все игроки из списка в файле `UninvitesList.ini` из LVPD. Повторный ввод данной команды будет прерывать цикл увольнения.


  * **Hbj** - плагин для выдачи объектов игрокам через `/hbject`.

    Добавляет поддержку следующих команд:

    - `/hbj [иды_игроков,через_запятую,без_пробелов] [названия_объектов,разделяются_через_запятую]` - выдать указанный объекты указанному игроку. Повторный ввод данной команды будет прерывать цикл выдачи объектов.

    - `/hbjs [названия_объектов,разделяются_через_запятую] [радиус] [lvl игроков] [1 - этот лвл и больше, 0 - этот лвл и меньше]` - раздать указанный объекты в указанном радиусе игрокам с указанными лвлами. Повторный ввод данной команды будет прерывать цикл выдачи объектов.


  * **TagName** - плагин, позволяющий видеть ники игроков и их ID сквозь стены и на максимальной дальности (WallHack).

    Добавляет поддержку следующих команд:

    - `/wh` - включить/выключить плагин (в настройках можно включить автозапуск).
    Внимание: если используется собейтовский WH - данный плагин просто не будет работать.


  * **Connect** - плагин, позволяющий подключаться/переподключаться к серверам без закрытия игры.

    Добавляет поддержку следующих команд:

    - `/connect [номер_сервера]` - подключиться к любому серверу SAMP-RP (пример: `/connect 10` - подключиться к 10-му серверу).
    - `/reconnect` - переподключиться к серверу, на котором вы находитесь/находились.


  * **AutoConnect** - плагин, позволяющий подключаться автоматически с SAMP-RP серверам, минуя окно списка серверов SAMP-приложения. Умеет заходить на 10-15 сервера проекта тем, у кого наблюдаются проблемы с обычным подключением к этим серверам. Также умеет сохранять копии чатлогов в отдельную директорию.
    По-умолчанию, выключен. Включить плагин можно в настройках `AdminHelper` (двойной клик по значку AHK в трее).
    После включения плагина в настройках `AdminHelper` при запуске `AdminHelper` отобразится окно подключения.


### Мероприятия

  * **День Z** - в штат попал вирус, превращающий людей в зомби. Цель людей - спастись. Цель зомби - убивать живых. Цель гос.служб - ловить зомби и привозить их в больницы. Главная цель гос.служб - найти нулевого пациента (который заражает людей).

    После запуска МП - нулевой пациент, за которым мы следим, при приближении к живых людям - заражает их, после чего они тоже прекращаются в Зомби.

    Активация: `/event dayz [id_нулевого_пациента]`.


  * **Парашюты** - автоматически телепортирует игроков, присылающих смс, к себе, при этом выдавая парашют.

    Взлетаем повыше (например, над площадью у Мэрии), запускаем МП и объявляем: "/o Желающие попрыгать с парашютом на площадь у Мэрии - кидаем '+' в смс" (пример).

    Активация: `/event parachute`.


### F.A.Q.

  - *Как запустить данный скрипт?*
  - **Для этого вам потребуется биндер "AutoHotkey". Скачать его можно [отсюда](http://ahkscript.org/download/ahk-install.exe), после чего его нужно установить, выбрав при установке версию `ANSI 32-bit`, а по окончанию установки двойным кликом запустить `AdminHelper.ahk` из корня папки с данным скриптом.**

---

  - *Как попасть в настройки?*
  - **Двойной клик по иконке `AdminHelper.ahk` в трее. Также можно просто запустить `GUI.ahk` из папки со скриптом, но в этом случае после изменения нужных настроек придётся вручную перезапустить основной `AdminHelper.ahk`, если он был запущен, чтобы настройки вступили в силу.**

---

  - *При использовании плагина `ReconViewer` или команды `/ntp` в чат выводится ошибка "В игре нет ни одного подходящего по LVL игрока".*
  - **Нужно открыть и закрыть Tab, чтобы список игроков подгрузился.**

---



### Плагины, которые в ближайшее время планируется добавить:

  * `CheckerID` - плагин, полностью заменяющий собейтовский чекер (данная возможность уже находится уже реализована и находится в тестировании).
  * `ChatID` - плагин, отображающий автоматически иды игроков рядом с их никами в чате и в килллисте (данная возможность уже находится уже реализована и находится в тестировании).
  * `AirBrake` - плагин, позволяющий летать (данная возможность уже реализована и находится в тестировании).
